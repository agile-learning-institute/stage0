# Service Configurability Standards

This document outlines the configuration standards for stage0 services, including API configuration using the config singleton and SPA configuration using Nginx.

## API Configuration

### Config Singleton

All APIs use the `Config` singleton from the `stage0_py_utils` package. This ensures consistent configuration management across all services. For detailed implementation, see [config.py](https://github.com/agile-learning-institute/stage0_py_utils/blob/main/config.py).

### Configuration Sources

The config singleton loads configuration from multiple sources in the following order:

1. **Default Values**: Hardcoded defaults in the config singleton
2. **Environment Variables**: Override defaults with environment variables
3. **Configuration Files**: Override environment variables of the same name. Note that this means there is not a unified configuration file, rather all config values are loaded from discrete files. 

### Special Configuration Values

- **BUILT_AT**: This value is always loaded from a file generated by Docker Build in CI. It is not configurable via environment variables or configuration files.
- **CONFIG_FOLDER**: This environment variable can be used to change the location of all other config file values. By default, config files are loaded from The default directory for the runtime ``./``

## SPA Configuration

### Nginx Configuration

SPAs are served by Nginx containers with a configuration to reverse proxy `/api/*` to the appropriate API. This uses Nginx configuration templating and the appropriate API_PORT environment variable.

## Configuration Best Practices

- *Use the Config Singleton*: **Always** use the config singleton for API configuration
- *Documentation*: Document all configuration options that you use in the service's README.md

## Getting Help

- Join our [Discord Server](https://discord.gg/agile-learning-institute)
- Check existing issues and PRs
- Ask in the development channel
- Contact maintainers
